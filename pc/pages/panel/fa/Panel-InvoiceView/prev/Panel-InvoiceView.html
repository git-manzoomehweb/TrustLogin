<basis core="dbsource" source="trust_login8" mid="24" name="Paneluser" lid="1" rkey="[##cms.cookie.rkey##]">
    <member name="login" type="scalar" request="userid" />
</basis>

<basis core="group" name="0" if="[##Paneluser.login.userid##]=0">
    <p style="text-align:center;font-family:tahoma">شما مجاز به دسترسی به این صفحه نمی باشید</p>
</basis>

<basis core="group" name="1" if="[##Paneluser.login.userid##]<>0">
    <basis core="external.fly.ws" procedurename="dbsource" source="cmsDbService2" name="db">
        <member name="get_unit_currency" method="cms" query='{
            "name": "db",
            "mid": "20",
            "member": [
                {
                    "type": "list",
                    "dmnid": "[##cms.cms.domainid##]",
                    "name": "q",
                    "lid": "2",
                    "request": "get_unit_currency"
                }
            ]
        }' />
    </basis>
    <basis core="group" name="Delay_0">
        <basis core='inlinesource' name='db'>
            <member name='unit_title' format="json" preview=""
                postsql="select value from [db.unit_title] where field = 'title'">
                {"root": [##db.get_unit_currency.result##]}
            </member>
        </basis>
        <basis core="dbsource" source="accounting" lid="1" name="db" factorid="[##cms.query.id##]"
            ownerid="[##cms.cms.ownerid##]">
            <member name="StatusAccount" type="list" request="accreport" preview="" />
        </basis>

        <basis core="dbsource" source="accounting" lid="1" name="db" factorid="[##cms.query.id##]"
            ownerid="[##cms.cms.ownerid##]">
            <member name="Remaining_amount" type="list" request="accreport" preview=""
                postsql="select taraz from [db.Remaining_amount] where description = 'taraz'" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="invoiceNote_List" method="panel" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [
                    { 
                        "name": "q",
                        "type":"list",
                        "request": "Panel_invoiceNote_List",
                        "factorid" : "[##cms.query.id##]", 
                        "userid":"[##Paneluser.login.userid##]"

                    }
                ] 
            }' postsql="select replace(replace(replace(replace(result,'None','undefined'),' inf','Infinity'),' -inf',' -Infinity'),' nan','NaN') as 'result' from [db.invoiceNote_List]"
                preview="" />
        </basis>

        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="item" method="panel" query='{
            "name" : "db",
            "mid" : "20",
            "member" : [
                {
                    "type" : "list",
                    "name" : "q",
                    "request" : "Panel_Invoice_Refund_Item"
                }
            ]}' preview="" />
        </basis>

        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="invoicerequest_List" method="panel" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [
                    { 
                        "name": "q",
                        "type":"list",
                        "factorid" : "[##cms.query.id##]", 
                        "dmnid" : "[##cms.cms.domainid##]",
                        "request": "Panel_Invoice_Refund_List",
                    }
                ] 
            }' postsql="select replace(replace(replace(replace(result,'None','undefined'),' inf','Infinity'),' -inf',' -Infinity'),' nan','NaN') as 'result' from [db.invoicerequest_List]"
                preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="passengers" method="cms" query='{
                "name" : "db",
                "mid" : "20",
                "member" : [
                    {
                        "type" : "list",
                        "name" : "q",
                        "request" : "PassengersList",
                        "dmnid" : "[##cms.cms.domainid##]",
                        "factorid" : "[##cms.query.id##]"
                    }
                ]}' preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="payment_permission" method="cms" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [ 
                    { 
                        "type":"list",
                        "name": "q", 
                        "request": "paymentPermission", 
                        "factorid":"[##cms.query.id##]",
                    }
                ]
            }' preview="" />
        </basis>

        <basis core="inlinesource" name="db">
            <member name="banks">
                <row bankcode="0" name="پرداخت انجام نشده است" />
                <row bankcode="1" name="بانک سامان" />
                <row bankcode="2" name="بانک ملت" />
                <row bankcode="3" name="بانک پاسارگاد" />
                <row bankcode="4" name="بانک پارسیان" />
                <row bankcode="5" name="پارس پال" />
                <row bankcode="6" name="درگاه تجارت الکترونیک پارسیان" />
                <row bankcode="7" name="بانک صادرات" />
                <row bankcode="7" name="بانک صادرات" />
                <row bankcode="9" name="درگاه سخاوت" />
                <row bankcode="8" name="درگاه آسان پرداخت" />
                <row bankcode="12" name="بانک گردشگری " />
                <row bankcode="13" name="کیپا (ویژه بازنشستگان ومستمری بگیران سازمان تامین اجتماعی)" />
                <row bankcode="15" name=" درگاه آقای پرداخت‎" />
                <row bankcode="11" name="زرین پال" />
                <row bankcode="16" name=" بانک آینده" />
                <row bankcode="17" name="درگاه آرکا" />
                <row bankcode="18" name=" بانک رفاه" />
                <row bankcode="19" name="بانک شهر" />
                <row bankcode="20" name="درگاه فدکس" />
                <row bankcode="30" name="درگاه فدکس ملت" />
                <row bankcode="21" name="clover" />
                <row bankcode="22" name="رایان کارت" />
                <row bankcode="23" name="ایران کیش" />
                <row bankcode="24" name="درگاه باسا" />
                <row bankcode="25" name="درگاه پاسارگاد2" />
                <row bankcode="27" name="درگاه سیبانک" />
                <row bankcode="28" name="اسنپ پی" />
            </member>
        </basis>

        <basis core="dbsource" source="accounting" name="db" eid="1" factorid="[##cms.query.id##]">
            <member name="payment" type="list" request="listpayment" />
        </basis>

        <basis core="group" name="Delay_1">
            <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                <member method="cms" name="InvoiceView" query='
             { 
                "name": "db", 
                "mid": "20", 
                "member":
                [
                    { 
                        "name": "q", 
                        "type":"list", 
                        "request":"invoiceview", 
                        "id":"[##cms.query.id##]",
                        "userid": "[##Paneluser.login.userid##]"  
                    }
                ] 
            }' />
            </basis>
            <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                <member method="cms" name="Document" query='
             {
                   "name": "db",
                "mid": "20",
                "member": 
                [
                      {
                        "name": "q",
                        "type": "view",
                        "id": "[##cms.query.id##]",
                        "rkey": "[##cms.cookie.rkey##]",
                        "request": "invoice_Document",
                        "lid":"1"
                    }
                ]
            }' preview="" />
            </basis>

            <basis core="inlinesource" name="db">
                <member name="CustomerPayment" leftTblCol="db.banks.bankcode" rightTblCol="db.payment.banktype"
                    joinType="innerjoin" format="join" />
            </basis>

            <basis core="group" name="Delay_2">
                <basis core='inlinesource' name='db'>
                    <member name="InvoiceView_Tree" format="json" preview="">{"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='Document_Tree' format="json" preview=""> {"root":[##db.Document.result##]} </member>
                    <member name='invoice_NoteList' format="json" preview="">{"root":[##db.invoiceNote_List.result##]}
                    </member>
                    <member name='InvoiceNote' format="json"
                        postsql="select value from [db.InvoiceNote] where Field = 'count'" preview="">
                        {"root":[##db.invoiceNote_List.result##]}
                    </member>
                    <member name='Itemjson' format="json" preview=""> {"root":[##db.item.result##]} </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceOpen' format="json"
                        postsql="select value from [db.InvoiceOpen] where Field = 'open'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceClear' format="json"
                        postsql="select value from [db.InvoiceClear] where Field = 'clear'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceCancel' format="json"
                        postsql="select value from [db.InvoiceCancel] where Field = 'cancel'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceType' format="json"
                        postsql="select value from [db.InvoiceType] where Field = 'invoicetype'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='basiscoreid' format="json"
                        postsql="select value from [db.basiscoreid] where Field = 'basiscoreid'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='Invoicerequest' format="json"
                        postsql="select value from [db.Invoicerequest] where Field = 'count'" preview="">
                        {"root":[##db.invoicerequest_List.result##]}
                    </member>

                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceStatus' format="json"
                        postsql="select value from [db.InvoiceStatus] where Field = 'status'" preview="">
                        {"root":[##db.invoicerequest_List.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='passengersjson' format="json" preview=""> {"root":[##db.passengers.result##]}
                    </member>
                    <member name='invoice_requestList' format="json" preview="">
                        {"root":[##db.invoiceRequest_List.result##]}
                    </member>
                </basis>
                <!doctype html>
                <html>

                <head>
                    <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                        <title>مشاهده قرارداد</title>
                    </basis>
                    <basis core="group" if="[##db.InvoiceOpen.value##]=1">
                        <title>مشاهده پیش قرارداد</title>
                    </basis>
                    <meta charset="utf-8">
                    <style type="text/css">
                        <basis core="call" file="Panel_User_css.inc" />
                    </style>
                    <link rel="stylesheet" href="/css/Panel-master-css.css" type="text/css">
                    <script src="[##cms.cms.cdn##]/_js/jquery-1.8.0.min.js"></script>
                </head>

                <body>
                    <div class="Panel_Container">
                        <basis core="call" file="Panel-Menu.inc" />

                        <div class="Panel_Wrraper_Box">
                            <basis core="call" file="Panel-Dashboard-Header.inc" />
                            <basis core="call" file="Panel-Icon.inc" />

                            <div class="Panel_invoice_View">
                                <div class="Panel_Box">
                                    <div class="Panel_Box_title">
                                        <span>
                                            مشاهده
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=0">قرارداد
                                                ([##cms.query.id##])</basis>
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=1">پیش قرارداد
                                                ([##cms.query.id##])</basis>
                                        </span>

                                        <basis core="group" if="[##db.InvoiceOpen.value##]=1">
                                            <a href="/InvoicePdf.bc?id=[##cms.query.id##]&open=[##cms.query.open##]&lid=1"
                                                class="Panel_Edit_icon pdf" title="دانلود پیش قرارداد"
                                                target="_blank"></a>
                                        </basis>
                                    </div>

                                    <div class="Panel_Box_Content">
                                        <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                            parentidcol="parentid" nullvalue="null">
                                            <face filter="Field in ('baggage','pdf_description')"></face>
                                            <face filter="Field in ('title')">
                                                <div>@value</div>
                                            </face>
                                            <face filter="type in ('Array','object')">@Child</face>
                                        </basis>
                                        <div class="clr"></div>
                                    </div>
                                </div>

                                <div class="invoice_Details_Box">
                                    <div class="invoice_Details">
                                        <div class="Details">
                                            <div class="Details_title">
                                                <p>
                                                    <span>[##cms.query.id##]</span>
                                                    <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                                                        <span>قرارداد</span>
                                                    </basis>
                                                    <basis core="group" if="[##db.InvoiceOpen.value##]=1"><span>پیش
                                                            قرارداد</span></basis>
                                                </p>
                                                <p><i class="fa fa-barcode"></i></p>
                                            </div>
                                        </div>
                                    </div>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('travelDate','invoiceDetails','products','creditPay')">
                                        </face>
                                        <face filter="Field in ('invoiceDate')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p>@child</p>
                                                        <p><i class="fa fa-calendar-check-o "></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>

                                        <face filter="Field in ('mstring')"><span>@value</span></face>
                                        <face filter="Field in ('sstring')"><span>@value</span></face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face
                                            filter="Field in ('travelDate','invoiceDetails','products','creditPay','priceDetails')">
                                        </face>
                                        <face filter="Field in ('time')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p><span>@value</span><span>ساعت</span></p>
                                                        <p><i class="fa fa-clock-o"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('invoiceDate','products','creditPay')"></face>
                                        <face filter="Field in ('travelDate')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p class="typeDate_[##db.InvoiceType.Value##]">@child</p>
                                                        <p class="iconDate_[##db.InvoiceType.Value##]"><i
                                                                class="fa fa-plane"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>
                                        <face filter="Field in ('mstring')"><span>@value</span></face>
                                        <face filter="Field in ('sstring')"><span>@value</span></face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('persons')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p>
                                                            <span>@value نفر</span>
                                                            <span>مسافران</span>
                                                        </p>
                                                        <p><i class="fa fa-users"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>

                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <div class="clr"></div>
                                </div>

                                <div id="Invoice-Tab">
                                    <basis core="group" name="doc-active" if="'[##cms.query.doc##]'='1'">
                                        <div class="Tab_Section">
                                            <a class="Tab_Title" onclick="show_information(event,'1')">مشخصات خرید</a>
                                            <a class="Tab_Title" onclick="show_information(event,'2')">مالی</a>
                                            <a class="Tab_Title" onclick="show_information(event,'3')"
                                                id="defaultOpen">مدارک</a>
                                            <a class="Tab_Title" onclick="show_information(event,'4')">پرداخت</a>
                                            <a class="Tab_Title" onclick="show_information(event,'5')">یادداشت ها
                                                <span class="noteCount">[##db.InvoiceNote.Value##]</span>
                                            </a>
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                                                <a class="Tab_Title" onclick="show_information(event,'6')">درخواست
                                                    استرداد و
                                                    تغییر
                                                    <span class="noteCount">([##db.Invoicerequest.Value|(0)##])</span>
                                                </a>
                                            </basis>
                                            <basis core="group" if="'[##db.InvoiceStatus.Value##]'='2'">
                                                <a class="Tab_Title" onclick="show_information(event,'7')">وضعیت
                                                    صدور</a>
                                            </basis>
                                        </div>
                                    </basis>
                                    <basis core="group" name="doc-active" if="'[##cms.query.doc##]'<>'1'">
                                        <div class="Tab_Section">
                                            <a class="Tab_Title" onclick="show_information(event,'1')"
                                                id="defaultOpen">مشخصات خرید</a>
                                            <a class="Tab_Title" onclick="show_information(event,'2')">مالی</a>
                                            <a class="Tab_Title" onclick="show_information(event,'3')">مدارک</a>
                                            <a class="Tab_Title" onclick="show_information(event,'4')">پرداخت</a>
                                            <a class="Tab_Title" onclick="show_information(event,'5')">یادداشت ها
                                                <span class="noteCount">[##db.InvoiceNote.Value##]</span>
                                            </a>
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                                                <a class="Tab_Title" onclick="show_information(event,'6')">درخواست
                                                    استرداد و
                                                    تغییر
                                                    <span class="noteCount">([##db.Invoicerequest.Value|(0)##])</span>
                                                </a>
                                            </basis>
                                            <basis core="group" if="'[##db.InvoiceStatus.Value##]'='2'">
                                                <a class="Tab_Title" onclick="show_information(event,'7')">وضعیت
                                                    صدور</a>
                                            </basis>
                                        </div>
                                    </basis>
                                    <div id="1" class="Tab_Content">
                                        <!-- account ############################################################################################## -->
                                        <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                            parentidcol="parentid" nullvalue="null">
                                            <face
                                                filter="Field in ('invoiceDetails','invoiceDate','products','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                            </face>
                                            <face filter="Field in ('account')">@child</face>
                                            <face filter="Field in ('person')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>مشخصات خریدار</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>نام </th>
                                                            <th>نام خانوادگی</th>
                                                            <th>ایمیل</th>
                                                            <th>تلفن ثابت</th>
                                                            <th>تلفن همراه</th>
                                                            <th>آدرس</th>
                                                            <th>جنسیت</th>
                                                            <th>کانتر اقدام کننده</th>
                                                            <th>نوع خریدار</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('mycounter_forPassenger')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>مشخصات خریدار</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>نام </th>
                                                            <th>نام خانوادگی</th>
                                                            <th>ایمیل</th>
                                                            <th>تلفن ثابت</th>
                                                            <th>تلفن همراه</th>
                                                            <th>آدرس</th>
                                                            <th>جنسیت</th>
                                                            <th>کانتر خرید کننده و اقدام کننده</th>
                                                            <th>نوع خریدار</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="invoice_tbody ">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('mycounter_forAgency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>مشخصات خریدار</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>نام آژانس </th>
                                                            <th>مدیر عامل</th>
                                                            <th>تلفن</th>
                                                            <th>آدرس</th>
                                                            <th>وب سایت</th>
                                                            <th>کانتر خرید کننده و اقدام کننده</th>
                                                            <th>نوع خریدار</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="invoice_tbody ">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('partner_agency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>مشخصات خریدار</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>نام آژانس </th>
                                                            <th>مدیر عامل</th>
                                                            <th>تلفن</th>
                                                            <th>آدرس</th>
                                                            <th>وب سایت</th>
                                                            <th>کانتر خرید کننده</th>
                                                            <th>ایمیل کانتر</th>
                                                            <th>موبایل کانتر</th>
                                                            <th>کانتر اقدام کننده</th>
                                                            <th>نوع خریدار</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('supplier_agency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>مشخصات خریدار</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>نام آژانس </th>
                                                            <th>مدیر عامل</th>
                                                            <th>تلفن</th>
                                                            <th>آدرس</th>
                                                            <th>وب سایت</th>
                                                            <th>کانتر اقدام کننده</th>
                                                            <th>نوع خریدار</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('firstname')">
                                                <td style="direction:ltr" data-label="نام">@value</td>
                                            </face>
                                            <face filter="Field in ('lastname')">
                                                <td style="direction:ltr" data-label="نام خانوادگی">@value</td>
                                            </face>
                                            <face filter="Field in ('email')">
                                                <td style="direction:ltr" data-label="ایمیل">@value</td>
                                            </face>
                                            <face filter="Field in ('tel')">
                                                <td style="direction:ltr" data-label="تلفن ثابت">@value</td>
                                            </face>
                                            <face filter="Field in ('mobile')">
                                                <td style="direction:ltr" data-label="تلفن همراه">@value</td>
                                            </face>
                                            <face filter="Field in ('address')">
                                                <td style="direction:ltr" data-label="آدرس">@value</td>
                                            </face>
                                            <face filter="Field in ('counterName')">
                                                <td style="direction:ltr" data-label="کانتر اقدام کننده">@value</td>
                                            </face>

                                            <face filter="Field in ('agencyname')">
                                                <td style="direction: ltr;" data-label="نام آژانس">@value</td>
                                            </face>
                                            <face filter="Field in ('agencymanegername')">
                                                <td style="direction: ltr;" data-label="مدیر عامل">@value</td>
                                            </face>
                                            <face filter="Field in ('agencytell')">
                                                <td style="direction: ltr;" data-label="تلفن">@value</td>
                                            </face>
                                            <face filter="Field in ('agencyaddress')">
                                                <td style="direction: ltr;" data-label="آدرس">@value</td>
                                            </face>
                                            <face filter="Field in ('agencyweb')">
                                                <td style="direction: ltr;" data-label="وب سایت">@value</td>
                                            </face>

                                            <face filter="Field in ('agencyid')">
                                                <input type="hidden" class="agencyid" value="@value">
                                            </face>

                                            <face filter="Field in ('namecounter')">
                                                <td data-label="کانتر اقدام کننده">@value
                                            </face>
                                            <face filter="Field in ('familycounter')"> @value</td>
                                            </face>
                                            <face filter="Field in ('email_counter')">
                                                <td data-label="ایمیل کانتر">@value</td>
                                            </face>
                                            <face filter="Field in ('mobile_counter')">
                                                <td data-label="موبایل کانتر">@value</td>
                                            </face>
                                            <face filter="Field in ('gender') and value not in ('0','1')">
                                                <td>-</td>
                                            </face>
                                            <face filter="Field in ('gender') and value='0'">
                                                <td data-label="جنسیت">خانم</td>
                                            </face>
                                            <face filter="Field in ('gender') and value='1'">
                                                <td data-label="جنسیت">آقا</td>
                                            </face>

                                            <face filter="Field in ('acctype') and value='243'">
                                                <td data-label="نوع خریدار">مسافر</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='241'">
                                                <td data-label="نوع خریدار">کانتر آژانس خودم</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='181'">
                                                <td data-label="نوع خریدار">کانتر آژانس خودم</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='182'">
                                                <td data-label="نوع خریدار">تامین کننده</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='242'">
                                                <td data-label="نوع خریدار">کانتر آژانس همکار</td>
                                            </face>
                                            <face filter="type in ('Array','object')">@Child</face>
                                        </basis>

                                        <!-- passengesr ########################################################################################### -->
                                        <basis:111 core="group" if="[##db.InvoiceType.Value##] not in ('13','12','14')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','products','account','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('passengers')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات مسافران</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>نام </th>
                                                                <th>نام خانوادگی</th>
                                                                <th>تاریخ تولد</th>
                                                                <th>کدملی</th>
                                                                <th>کد پاسپورت</th>
                                                                <th>تاریخ انقضای پاسپورت</th>
                                                                <th>کشور</th>
                                                                <th>جنسیت</th>
                                                                <th>رنج سنی مسافر</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody">@Child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('passengerinfo')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <td data-label="نام">@value</td>
                                                </face>
                                                <face filter="Field in ('lastname')">
                                                    <td data-label="نام خانوادگی">@value</td>
                                                </face>
                                                <face filter="Field in ('nationalcode')">
                                                    <td data-label="کد ملی">@value</td>
                                                </face>
                                                <face filter="Field in ('passportcode')">
                                                    <td data-label="کد پاسپورت">@value</td>
                                                </face>
                                                <face filter="Field in ('passportexpiration')">
                                                    <td data-label="تاریخ انقضای پاسپورت">@value</td>
                                                </face>

                                                <face filter="Field in ('birthdate') and type in ('object')">
                                                    <td data-label="تاریخ تولد">@child</td>
                                                </face>
                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div>@value</div>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p></p>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p style="font-size:11px"></p>
                                                </face>

                                                <face filter="Field in ('countryofresidence')">
                                                    <td data-label="کشور">@child</td>
                                                </face>
                                                <face filter="Field in ('countryname')">@value</face>

                                                <face filter="Field in ('gender') and value = '0'">
                                                    <td data-label="جنسیت">خانم</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '1'">
                                                    <td data-label="جنسیت">آقا</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '0'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">نوزاد</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '1'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '2'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '3'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '4'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال (اضافه)</td>
                                                </face>
                                                <face filter="Field in ('wheelchair') and type in ('Scalar.String')">
                                                    <input type="hidden" value="@value" class="wheelchair">
                                                </face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:111>
                                        <basis:112 core="group" if="[##db.InvoiceType.Value##] in ('13')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','products','account','passengers','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('passengersvisa')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات مسافران</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>نام </th>
                                                                <th>نام خانوادگی</th>
                                                                <th>تاریخ تولد</th>
                                                                <th>کدملی</th>
                                                                <th>نام پدر</th>
                                                                <th>کد پاسپورت</th>
                                                                <th>تاریخ انقضای پاسپورت</th>
                                                                <th>تاریخ صدور گذرنامه</th>
                                                                <th>کشور</th>
                                                                <th>کشور صادرکننده گذرنامه</th>
                                                                <th>کشور محل تولد</th>
                                                                <th>جنسیت</th>
                                                                <th>رنج سنی مسافر</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody">@Child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('passengerinfo')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <td data-label="نام">@value</td>
                                                </face>
                                                <face filter="Field in ('lastname')">
                                                    <td data-label="نام خانوادگی">@value</td>
                                                </face>
                                                <face filter="Field in ('nationalcode')">
                                                    <td data-label="کد ملی">@value</td>
                                                </face>
                                                <face filter="Field in ('passportcode')">
                                                    <td data-label="کد پاسپورت">@value</td>
                                                </face>
                                                <face filter="Field in ('passportexpiration')">
                                                    <td data-label="تاریخ انقضای پاسپورت">@value</td>
                                                </face>

                                                <face filter="Field in ('birthdate') and type in ('object')">
                                                    <td data-label="تاریخ تولد">@child</td>
                                                </face>
                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div>@value</div>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p></p>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p style="font-size:11px"></p>
                                                </face>

                                                <face filter="Field in ('countryofresidence')">
                                                    <td data-label="کشور">@child</td>
                                                </face>
                                                <face filter="Field in ('Countryofbirth')">
                                                    <td data-label="کشور تولد">@child</td>
                                                </face>
                                                <face filter="Field in ('countryofpassportissue')">
                                                    <td data-label="کشور صادرکننده گذرنامه">@child</td>
                                                </face>
                                                <face filter="Field in ('countryname')">@value</face>
                                                <face filter="Field in ('fathername')">
                                                    <td data-label="نام پدر">@value</td>
                                                </face>

                                                <face filter="Field in ('passportissuedate')">
                                                    <td data-label="تاریخ صدورگذرنامه">@value</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '0'">
                                                    <td data-label="جنسیت">خانم</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '1'">
                                                    <td data-label="جنسیت">آقا</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '0'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">نوزاد</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '1'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '2'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '3'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '4'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال (اضافه)</td>
                                                </face>
                                                <face filter="Field in ('wheelchair') and type in ('Scalar.String')">
                                                    <input type="hidden" value="@value" class="wheelchair">
                                                </face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:112>
                                        <basis:113 core="group" if="[##db.InvoiceType.Value##]  in ('12','14')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','products','account','passengers','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('passengersvisa')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات مسافران</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th> نام </th>
                                                                <th>نام خانوادگی</th>
                                                                <th>تاریخ تولد</th>
                                                                <th>جنسیت</th>
                                                                <th>رنج سنی مسافر</th>

                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody">@Child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('passengerinfo')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <td data-label="نام">@value</td>
                                                </face>
                                                <face filter="Field in ('lastname')">
                                                    <td data-label="نام خانوادگی">@value</td>
                                                </face>
                                                <face filter="Field in ('birthdate') and type in ('object')">
                                                    <td data-label="تاریخ تولد">@child</td>
                                                </face>
                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div>@value</div>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p></p>
                                                </face>
                                                <face
                                                    filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p style="font-size:11px"></p>
                                                </face>


                                                <face filter="Field in ('gender') and value = '0'">
                                                    <td data-label="جنسیت">خانم</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '1'">
                                                    <td data-label="جنسیت">آقا</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '0'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">نوزاد</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '1'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '2'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '3'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">کودک</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '4'">
                                                    <td class="typepassenger" data-label="رنج سنی مسافر"
                                                        style="direction: ltr;">بزرگسال (اضافه)</td>
                                                </face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:113>

                                        <!-- products ############################################################################################# -->
                                        <!-- type == 1 -->
                                        <basis:1 core="group" if="[##db.InvoiceType.Value##] in ('1')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات محصول - ( اطلاعات پرواز یکطرفه )</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>مبدا - مقصد</th>
                                                                <th>تاریخ</th>
                                                                <th>زمان خروج</th>
                                                                <th>زمان ورود</th>
                                                                <th>نام ایرلاین</th>
                                                                <th>لوگوی ایرلاین</th>
                                                                <th>فرودگاه مبدا</th>
                                                                <th>فرودگاه مقصد</th>
                                                                <th>شماره پرواز</th>
                                                                <th>کلاس پروازی</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>@child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="مبدا - مقصد">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="زمان خروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="زمان ورود">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="کلاس پروازی">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="شماره پرواز">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="نام ایرلاین">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="لوگوی ایرلاین"><img width="80px" src="/@value"></td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاریخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('sstring')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="فرودگاه مبدا">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="فرودگاه مقصد">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:1>

                                        <!-- type == 2 -->
                                        <basis:2 core="group" if="[##db.InvoiceType.Value##] in ('2','4','6')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات محصول - ( اطلاعات پرواز رفت و برگشت )</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>مبدا - مقصد</th>
                                                                <th>تاریخ</th>
                                                                <th>زمان خروج</th>
                                                                <th>زمان ورود</th>
                                                                <th>نام ایرلاین</th>
                                                                <th>لوگوی ایرلاین</th>
                                                                <th>فرودگاه مبدا</th>
                                                                <th>فرودگاه مقصد</th>
                                                                <th>شماره پرواز</th>
                                                                <th>کلاس پروازی</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                                <face filter="Field in ('departure') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسیر رفت
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('return') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسیر برگشت
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="مبدا - مقصد">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="زمان خروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="زمان ورود">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="کلاس پروازی">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="شماره پرواز">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="نام ایرلاین">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="لوگوی ایرلاین"><img width="80px" src="/@value"></td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاریخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('sstring')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="فرودگاه مبدا">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="فرودگاه مقصد">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:2>
                                        <!-- type == 7-->
                                        <basis:14 core="group" if="[##db.InvoiceType.Value##] in ('7')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات محصول - ( اطلاعات پرواز چند مسیره )</span>
                                                            </p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>مبدا - مقصد</th>
                                                                <th>تاریخ</th>
                                                                <th>زمان خروج</th>
                                                                <th>زمان ورود</th>
                                                                <th>نام ایرلاین</th>
                                                                <th>لوگوی ایرلاین</th>
                                                                <th>فرودگاه مبدا</th>
                                                                <th>فرودگاه مقصد</th>
                                                                <th>شماره پرواز</th>
                                                                <th>کلاس پروازی</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                                <face filter="Field in ('departure') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسیر اول
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('return') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسیر دوم
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="مبدا - مقصد">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="زمان خروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="زمان ورود">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="کلاس پروازی">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="شماره پرواز">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="نام ایرلاین">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="لوگوی ایرلاین"><img width="80px" src="/@value"></td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاریخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('sstring')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="فرودگاه مبدا">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="فرودگاه مقصد">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:14>
                                        <!-- type == 3 -->
                                        <basis:3 core="group" if="[##db.InvoiceType.Value##] in ('3','4','6','10')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>مشخصات محصول - ( اطلاعات هتل )</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>نام هتل</th>
                                                                <th>درجه هتل</th>
                                                                <th>شهر</th>
                                                                <th>اتاق</th>
                                                                <th>نوع اتاق</th>
                                                                <th>تاریخ ورود</th>
                                                                <th>تاریخ خروج</th>
                                                                <th>مسافران</th>
                                                                <th>خدمات</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face filter="Field in ('departure','return','transfer','insurance')">
                                                </face>
                                                <face
                                                    filter="Field in ('hotel') and type in ('array') and value not in ('[]')">
                                                    <tbody>
                                                        <tr>
                                                            <td colspan="9"
                                                                style="background:#F9ECF9;text-align:right;padding:15px 0">
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('room')">
                                                    <tr>@Child</tr>
                                                </face>
                                                <face filter="Field in ('hotelName')">
                                                    <td data-label="نام هتل">@value</td>
                                                </face>
                                                <face filter="Field in ('cityName')">
                                                    <td data-label="شهر">@value</td>
                                                </face>
                                                <face filter="Field in ('roomNumber')">
                                                    <td data-label="اتاق">@value</td>
                                                </face>
                                                <face filter="Field in ('roomType')">
                                                    <td data-label="نوع اتاق">@value</td>
                                                </face>
                                                <face filter="Field in ('service') and type in ('scalar.String')">
                                                    <td data-label="خدمات">@value</td>
                                                </face>

                                                <face filter="Field in ('hotelStar')">
                                                    <td data-label="درجه هتل">
                                                        <img src="http://185.44.36.230/reservation/images/@value.png"
                                                            width="70" alt="@value ستاره">
                                                    </td>
                                                </face>

                                                <face filter="Field in ('fromDate')">
                                                    <td data-label="تاریخ ورود">@child</td>
                                                </face>
                                                <face filter="Field in ('toDate')">
                                                    <td data-label="تاریخ خروج">@child</td>
                                                </face>
                                                <face filter="Field in ('passengers')">
                                                    <td data-label="مسافران">@child</td>
                                                </face>

                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('sstring')">
                                                    <div style="font-size:11px">(@value)</div>
                                                </face>

                                                <face filter="Field in ('passengersRoom')">
                                                    <td data-label="مسافران">@child</td>
                                                </face>
                                                <face filter="Field in ('adult')"><span class="passengers">@value
                                                        بزرگسال</span></face>
                                                <face filter="Field in ('child Withbed') and value <> '0'"><span
                                                        class="passengers">@value کودک (با تخت)</span></face>
                                                <face filter="Field in ('child Withoutbed') and value <> '0'"><span
                                                        class="passengers">@value کودک (بدون تخت)</span></face>
                                                <face filter="Field in ('infant') and value <> '0'"><span
                                                        class="passengers">@value نوزاد</span></face>
                                                <face filter="Field in ('extra Adult') and value <> '0'"><span
                                                        class="passengers">@value بزرگسال اضافه</span></face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:3>
                                        <basis:33 core="group" if="[##db.InvoiceType.Value##] in ('3','6')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    @child
                                                </face>

                                                <face
                                                    filter="Field in ('departure','return','transfer','insurance','hotel','transfers')">
                                                </face>
                                                <face
                                                    filter="Field in ('services') and type in ('array') and value <> '[]'">
                                                    <table class="invoice_tbl product_tbl">
                                                        <caption class="invoice_caption">
                                                            <p>مشخصات محصول - (اطلاعات خدمات وگشت)</p>
                                                        </caption>
                                                        <thead>
                                                            <tr>

                                                                <td>نام مسافر</td>
                                                                <td>نام خدمات</td>
                                                                <td>وب سرویس</td>
                                                                <td>قیمت کل</td>
                                                                <td>واحد</td>

                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody"> @child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('service')">
                                                    <tr>@Child</tr>
                                                </face>
                                                <face filter="Field in ('service_passengerlist')">
                                                    <td>@Child</td>
                                                </face>
                                                <face filter="Field in ('servicename')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('webservices')">
                                                    <td>@child</td>
                                                </face>
                                                <face filter="Field in ('webservice')">@value</face>
                                                <face filter="Field in ('refnumber')">/@value</face>
                                                <face filter="Field in ('servicecost')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('serviceunit')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <div><span>@value-</span>
                                                </face>
                                                <face filter="Field in ('lastname')"><span>@value</span>
                                    </div>
                                    </face>


                                    <face filter="Field in ('cancel') and value ='1'">

                                        <input type="hidden" name="" class="canceli" value="1">
                                    </face>
                                    <face filter="Field in ('cancel') and value ='0'">

                                        <input type="hidden" name="" class="canceli" value="0">
                                    </face>

                                    <face filter="Field in ('error') and value ='1'">
                                        <td class="Webervice_Refnumber">
                                            <div>ناموفق</div>
                                            <div>
                                                <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]"
                                                    class="Webervice_Link" title="صدور هتل">
                                                    صدور هتل
                                                    <i class="fa fa-external-link-square-alt"></i>
                                                </a>
                                            </div>
                                        </td>
                                    </face>


                                    <face filter="type in ('Array','object')">@Child</face>
            </basis>
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <face
                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                </face>
                <face filter="Field in ('products')">
                    @child
                </face>

                <face filter="Field in ('departure','return','transfer','insurance','hotel','services')"></face>
                <face filter="Field in ('transfers')">
                    <table class="invoice_tbl product_tbl">
                        <caption class="invoice_caption">
                            <p>مشخصات محصول - (اطلاعات ترنسفر)</p>
                        </caption>
                        <thead>
                            <tr>

                                <td>نام خدمات</td>
                                <td>نام ترنسفر</td>
                                <td>نوع ترنسفر</td>
                                <td>فرودگاه</td>

                                <td>تاریخ پرواز رفت</td>
                                <td>تاریخ پرواز برگشت</td>
                                <td>کدمسیر رفت</td>
                                <td>کدمسیربرگشت</td>

                                <td>ساعت پرواز رفت</td>
                                <td>ساعت پرواز برگشت</td>
                                <td>ایرلاین پرواز رفت</td>
                                <td>ایرلاین پرواز برگشت</td>
                                <td>وب سرویس</td>
                                <td>قیمت کل</td>
                                <td>واحد</td>

                            </tr>
                        </thead>

                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </face>


                <face filter="Field in ('t_servicename')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transfername')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('routename')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('airport')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_Date')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_Date')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_routecode')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_routecode')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_hour')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_hour')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_airlinename','departure_airlinename')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transfercost')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transferunit')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('webservices')">
                    <td>@child</td>
                </face>
                <face filter="Field in ('webservice')">@value</face>
                <face filter="Field in ('refnumber')">/@value</face>



                <face filter="Field in ('cancel') and value ='1'">

                    <input type="hidden" name="" class="canceli" value="1">
                </face>
                <face filter="Field in ('cancel') and value ='0'">

                    <input type="hidden" name="" class="canceli" value="0">
                </face>

                <face filter="Field in ('error') and value ='1'">
                    <td class="Webervice_Refnumber">
                        <div>ناموفق</div>
                        <div>
                            <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]"
                                class="Webervice_Link" title="صدور هتل">
                                صدور هتل
                                <i class="fa fa-external-link-square-alt"></i>
                            </a>
                        </div>
                    </td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>
            </basis:33>

            <!-- type == 4 -->
            <basis:4 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                <!-- city Transfer in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('transfer') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول - ( اطلاعات ترنسفر بین شهری )</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>مبدا - مقصد</th>
                                    <th>تاریخ</th>
                                    <th>زمان خروج</th>
                                    <th>زمان ورود</th>
                                    <th>ایرلاین</th>
                                    <th>لوگوی ایرلاین</th>
                                    <th>فرودگاه مبدا</th>
                                    <th>فرودگاه مقصد</th>
                                    <th>شماره پرواز</th>
                                    <th>کلاس پروازی</th>
                                </tr>
                            </thead>

                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('departure','return','hotels','insurance')"></face>
                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="مبدا - مقصد">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="زمان خروج">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="زمان ورود">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="کلاس پروازی">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="شماره پرواز">@value</td>
                    </face>

                    <face filter="Field in ('airline')">
                        <td data-label="نام ایرلاین">@value</td>
                    </face>
                    <face filter="Field in ('airlineimage')">
                        <td data-label="لوگوی ایرلاین"><img width="80px" src="/@value"></td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاریخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('sstring')">
                        <div style="font-size:11px">(@value)</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="فرودگاه مبدا">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="فرودگاه مقصد">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <!-- insurance in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('insurance') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول - ( اطلاعات بیمه )</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>کشور</th>
                                    <th>نوع بیمه</th>
                                    <th>شرکت بیمه کننده</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>@child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('insuranceCountry')">
                        <td data-label="کشور">@value</td>
                    </face>
                    <face filter="Field in ('insuranceName')">
                        <td data-label="نوع بیمه">@value</td>
                    </face>
                    <face filter="Field in ('insuranceProvider')">
                        <td data-label="شرکت بیمه کننده">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <!-- tourDetails in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face filter="Field in ('invoiceDate','travelDate')"></face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('tourDetails') and value <> '{}'">
                        <table class="invoice_tbl tourDetails">
                            <colgroup>
                                <col width="20%">
                                </col>
                                <col width="80%">
                                </col>
                            </colgroup>

                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول - ( جزئیات تور )</span></p>
                            </caption>
                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('type') and type in ('array')">
                        <tr>
                            <td>نوع تور</td>
                            <td data-label="نوع تور">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('appropriate') and type in ('array')">
                        <tr>
                            <td>مناسب برای</td>
                            <td data-label="مناسب برای">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('diff') and type in ('array')">
                        <tr>
                            <td>سطح سختی</td>
                            <td data-label="سطح سختی">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('tool') and type in ('array')">
                        <tr>
                            <td>ملزومات مورد نیاز</td>
                            <td data-label="ملزومات مورد نیاز">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('service11') and type in ('array')">
                        <tr>
                            <td>خدمات رایگان</td>
                            <td data-label="خدمات رایگان">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('journey') and type in ('array')">
                        <tr>
                            <td>برنامه سفر</td>
                            <td data-label="برنامه سفر">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('description') and type in ('array')">
                        <tr>
                            <td>توضیحات</td>
                            <td data-label="توضیحات">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('servicename','decs')"><span class="serviceName">@value</span></face>
                    <face filter="Field in ('journeytitle')"><span class="serviceName">@value :
                    </face>
                    <face filter="Field in ('journeydesc')"> @value</span></face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:4>
            <basis core="group" if="[##db.InvoiceType.Value##] in ('10')">
                <basis core="dbsource" source="basiscore" name="product" lid="1" mid="20"
                    usedforid="[##db.basiscoreid.value##]">
                    <member name="info" type="view" preview="" />
                </basis>


                <basis core="view" datamembername="product.info">
                    <layout>
                        <table class="invoice_tbl tourDetails">
                            <colgroup>
                                <col width="20%">
                                </col>
                                <col width="80%">
                                </col>
                            </colgroup>

                            <caption class="invoice_caption">
                                <p>مشخصات محصول - ( جزئیات تور )</p>
                            </caption>
                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </layout>
                    <face filter="prpid not in (8070,8181,8185,8186,8187,54281,8084)" level="1">
                        <tr class="tour-info">
                            <td>@question </td>
                            <td>@child</td>
                            <div class="clr"></div>
                        </tr>
                    </face>
                    <face filter="prpid not in (8070,8181,8185,8186,8187,54281,8084)" level="2">
                        <span class="serviceName"> @answer</span>
                    </face>
                    <face filter="prpid in (8084)" level="1">
                        <tr class="tour-info">
                            <td>@question </td>
                            <td>@child</td>
                            <div class="clr"></div>
                        </tr>
                    </face>
                    <face filter="prpid in (8084)" level="2">
                        <div class="item_tourDetails">
                            <div class="heading-text">@text</div>
                            <div class="serviceName">@largetext</div>
                        </div>
                    </face>
                </basis>
            </basis>

            <!-- type == 5 -->
            <basis:5 core="group" if="[##db.InvoiceType.Value##] in ('5','6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('insurance')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول - ( اطلاعات بیمه )</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>کشور</th>
                                    <th>نام بیمه</th>
                                    <th>مدت زمان</th>
                                    <th>شرکت بیمه کننده</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>@child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('departure','return','hotel')"></face>
                    <face filter="Field in ('country')">
                        <td data-label="کشور">@value</td>
                    </face>
                    <face filter="Field in ('name')">
                        <td data-label="نام بیمه">@value</td>
                    </face>
                    <face filter="Field in ('Provider')">
                        <td data-label="شرکت بیمه کننده">@value</td>
                    </face>
                    <face filter="Field in ('duration') and type in ('object')">
                        <td data-label="مدت زمان" style="direction:rtl">@child</td>
                    </face>
                    <face filter="Field in ('duration','durationtype') and type in ('Scalar.String')">
                        <span> @value</span>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:5>

            <!-- products type == 8 -->
            <basis:6 core="group" if="[##db.InvoiceType.Value##] in ('8')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>مشخصات محصول - ( اطلاعات قطار یکطرفه )</p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>مبدا - مقصد</th>
                                    <th>تاریخ</th>
                                    <th>زمان خروج</th>
                                    <th>زمان ورود</th>
                                    <th>نام شرکت</th>
                                    <th>ایستگاه مبدا</th>
                                    <th>ایستگاه مقصد</th>
                                    <th>شماره قطار</th>
                                    <th>کلاس قطار</th>
                                </tr>
                            </thead>

                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="مبدا - مقصد" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="زمان خروج" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="زمان ورود" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="کلاس قطار" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="نام شرکت" style="direction:rtl">@value</td>
                    </face>

                    <face filter="Field in ('trainid')">
                        <td data-label="شماره قطار">@value</td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاریخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('sstring')">
                        <div style="font-size:11px">(@value)</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="ایستگاه مبدا">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="ایستگاه مقصد">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:6>
            <basis:16 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p>مشخصات محصول - (اطلاعات lounge)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>نام محصول</td>
                                    <td>نام فرودگاه</td>
                                    <td>شهر</td>
                                    <td class="th_flightType"></td>
                                    <td>تاریخ پرواز</td>
                                    <td>ساعت پرواز</td>
                                    <td>نوع سفر</td>
                                    <td>نوع پرواز</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>


                    <face filter="Field in ('cip') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face
                        filter="Field in ('loungename','airportname','route','time','route_k') and type in ('scalar.String')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('travelType') and value in ('1')">
                        <td>داخلی</td>
                    </face>
                    <face filter="Field in ('travelType') and value in ('2')">
                        <td>خارجی</td>
                    </face>
                    <face filter="Field in ('flightType') and value in ('1')">
                        <td>
                            <input type="hidden" value="1" class="flightType">ورودی
                        </td>
                    </face>
                    <face filter="Field in ('flightType') and value in ('2')">
                        <td>
                            <input type="hidden" value="2" class="flightType">خروجی
                        </td>
                    </face>


                    <face filter="Field in ('routeDate')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('sstring')">
                        <div style="font-size:11px">(@value)</div>
                    </face>

                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:16>
            <basis:18 core="group" if="[##db.InvoiceType.Value##] in ('13')">

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p>مشخصات محصول - (اطلاعات ویزا)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>نام محصول</td>
                                    <td>کشور</td>
                                    <td>کاربرد ویزا</td>
                                    <td>نوع ویزا</td>
                                    <td>تعداد دفعات ورود</td>
                                    <td>مدت اعتبار</td>
                                    <td>مدارک مورد نیاز</td>
                                    <td>تاریخ</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>


                    <face filter="Field in ('visa') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face
                        filter="Field in ('visaname','visacountry','application','visatype','visit_log') and type in ('scalar.String')">
                        <td>@value</td>
                    </face>

                    <face filter="Field in ('validity_duration')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('time')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('months')">
                        <div>@value</div>
                    </face>

                    <face filter="Field in ('documents')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('name1')">
                        <div>@value</div>
                    </face>


                    <face filter="Field in ('visadate')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('sstring')">
                        <div style="font-size:11px">(@value)</div>
                    </face>

                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:18>

            <!-- products type == 9 -->
            <basis:7 core="group" if="'[##db.InvoiceType.Value##]' in ('9')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>مشخصات محصول - ( اطلاعات قطار دوطرفه )</p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>مبدا - مقصد</th>
                                    <th>تاریخ</th>
                                    <th>زمان خروج</th>
                                    <th>زمان ورود</th>
                                    <th>نام شرکت</th>
                                    <th>ایستگاه مبدا</th>
                                    <th>ایستگاه مقصد</th>
                                    <th>شماره قطار</th>
                                    <th>کلاس قطار</th>
                                </tr>
                            </thead>

                            @child
                        </table>
                    </face>

                    <face filter="Field in ('hotel','transfer','insurance')"></face>
                    <face filter="Field in ('departure') and type in ('array')">
                        <tbody>
                            <tr>
                                <td data-label="مسیر رفت" class="row_type_[##cms.form.type##]" colspan="10"
                                    style="background:#F9ECF9;text-align:right;padding-right:22px">
                                    مسیر رفت</td>
                            </tr>
                            @child
                        </tbody>
                    </face>

                    <face filter="Field in ('return') and type in ('array')">
                        <tbody>
                            <tr>
                                <td data-label="مسیر برگشت" class="row_type_[##cms.form.type##]" colspan="10"
                                    style="background:#F9ECF9;text-align:right;padding-right:22px">
                                    مسیر برگشت</td>
                            </tr>
                            @child
                        </tbody>
                    </face>

                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="مبدا - مقصد" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="زمان خروج" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="زمان ورود" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="کلاس قطار" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="نام شرکت" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('trainid')">
                        <td data-label="شماره قطار">@value</td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاریخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('sstring')">
                        <div style="font-size:11px">(@value)</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="ایستگاه مبدا">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="ایستگاه مقصد">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:7>

            <basis:77 core="group" if="'[##db.InvoiceType.Value##]' in ('12')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        @child
                    </face>


                    <face filter="Field in ('service') and type in ('array') and value <> '[]'">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول-(اطلاعات خدمات)</span></p>
                            </caption>
                            <thead>
                                <tr>

                                    <td>نام گروه خدماتی</td>
                                    <td>نام خدمات</td>
                                    <td>تاریخ</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody"> @child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('service') and type in ('Object')">
                        <tr>@Child</tr>
                    </face>

                    <face filter="Field in ('transfers') and type in ('array') and value <> '[]'">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول-(اطلاعات ترنسفر)</span></p>
                            </caption>


                            <thead>
                                <tr>

                                    <td>نام خدمات</td>
                                    <td>نام ترنسفر</td>
                                    <td>نوع ترنسفر</td>
                                    <td>فرودگاه</td>

                                    <td>تاریخ پرواز رفت</td>
                                    <td>تاریخ پرواز برگشت</td>
                                    <td>کدمسیر رفت</td>
                                    <td>کدمسیربرگشت</td>

                                    <td>ساعت پرواز رفت</td>
                                    <td>ساعت پرواز برگشت</td>
                                    <td>ایرلاین پرواز رفت</td>
                                    <td>ایرلاین پرواز برگشت</td>
                                    <td>آدرس رفت</td>
                                    <td>آدرس برگشت</td>
                                    <td>وب سرویس</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>

                                </tr>
                            </thead>




                            <tbody class="invoice_tbody"> @child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('transfers') and type in ('Object')">
                        <tr>@Child</tr>
                    </face>


                    <face filter="Field in ('servicename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('groupname')">
                        <td>@value</td>
                    </face>


                    <face filter="Field in ('servicedate')">
                        <td>@child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <p>@value</p>
                    </face>

                    <face filter="Field in ('sstring')">
                        <p style="font-size:11px">(@value)</p>
                    </face>

                    <face filter="Field in ('t_servicename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transfername')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('routename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_Date')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_Date')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_routecode')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_routecode')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_hour')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_hour')">
                        <td>@value</td>
                    </face>
                    <face
                        filter="Field in ('return_airlinename','departure_airlinename','departure_address','return_address')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transfercost','servicecost')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transferunit','serviceunit')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('webservices')">
                        <td>@child</td>
                    </face>
                    <face filter="Field in ('webservice')">@value</face>


                    <face filter="Field in ('cancel') and value ='1'">

                        <input type="hidden" name="" class="canceli" value="1">
                    </face>
                    <face filter="Field in ('cancel') and value ='0'">

                        <input type="hidden" name="" class="canceli" value="0">
                    </face>


                    <face filter="type in ('Array','object')">@Child</face>
                </basis>



            </basis:77>

            <basis:777 core="group" if="'[##db.InvoiceType.Value##]' in ('14')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        @child
                    </face>


                    <face filter="Field in ('transfers') and type in ('array') and value <> '[]'">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p><span>مشخصات محصول-(اطلاعات ترنسفر)</span></p>
                            </caption>


                            <thead>
                                <tr>

                                    <td>نام خدمات</td>
                                    <td>نام ترنسفر</td>
                                    <td>نوع ترنسفر</td>
                                    <td>فرودگاه</td>

                                    <td>تاریخ پرواز رفت</td>
                                    <td>تاریخ پرواز برگشت</td>
                                    <td>کدمسیر رفت</td>
                                    <td>کدمسیربرگشت</td>

                                    <td>ساعت پرواز رفت</td>
                                    <td>ساعت پرواز برگشت</td>
                                    <td>ایرلاین پرواز رفت</td>
                                    <td>ایرلاین پرواز برگشت</td>
                                    <td>آدرس رفت</td>
                                    <td>آدرس برگشت</td>
                                    <td>وب سرویس</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>

                                </tr>
                            </thead>

                            <tbody class="invoice_tbody"> @child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('transfers') and type in ('Object')">
                        <tr>@Child</tr>
                    </face>

                    <face filter="Field in ('t_servicename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transfername')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('routename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_Date')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_Date')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_routecode')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_routecode')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('departure_hour')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_hour')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('return_airlinename','departure_airlinename')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transfercost')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('transferunit')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('webservices')">
                        <td>@child</td>
                    </face>
                    <face filter="Field in ('webservice')">@value</face>
                    <face filter="Field in ('refnumber')">/@value</face>



                    <face filter="Field in ('cancel') and value ='1'">

                        <input type="hidden" name="" class="canceli" value="1">
                    </face>
                    <face filter="Field in ('cancel') and value ='0'">

                        <input type="hidden" name="" class="canceli" value="0">
                    </face>


                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:777>

            <!-- price Details ######################################################################################## -->
            <!-- type == 1,2,5,8,9 -->
            <basis:8 core="group" if="[##db.InvoiceType.Value##] in ('1','2','5','8','9','11','13')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','baggages','bill','creditPay','invoiceDetails','account','passengers','passengersvisa','products','Financial','wheelchair','services','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول قیمت به تفکیک نفرات</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>رنج سنی مسافر</th>
                                    <th>تعداد مسافر</th>
                                    <th>قیمت واحد</th>
                                    <th>قیمت کل</th>
                                    <th>واحد</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">بزرگسال</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">کودک</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">نوزاد</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="قیمت واحد" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="قیمت کل   " class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="تعداد مسافر">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="واحد">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:8>

            <!-- type == 3 -->
            <basis:9 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول قیمت به تفکیک نفرات / اتاق</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>اتاق</th>
                                    <th>رنج سنی مسافر</th>
                                    <th>تعداد مسافر</th>
                                    <th>قیمت واحد (به ازای هر شب)</th>
                                    <th>قیمت کل (به ازای هر شب)</th>
                                    <th>واحد</th>
                                </tr>
                            </thead>

                            @Child
                        </table>
                    </face>

                    <face filter="Field in ('room')">
                        <tbody class="invoice_tbody Room_priceDetails">@Child</tbody>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">بزرگسال</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withbed') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">کودک (با تخت)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withoutbed') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">کودک (بدون تخت)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">نوزاد</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('extra Adult') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">بزرگسال اضافه</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('rooms')">
                        <tr>
                            <td data-label="رنج سنی مسافر">-</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="قیمت واحد (به ازای هر شب)" class="Panel_Seprator">@value
                        </td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="قیمت کل (به ازای هر شب)" class="Panel_Seprator">@value
                        </td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="تعداد مسافر">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="واحد">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:9>

            <!-- type == 4 -->
            <basis:10 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول قیمت به تفکیک نفرات / اتاق</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>اتاق</th>
                                    <th>رنج سنی مسافر</th>
                                    <th>تعداد مسافر</th>
                                    <th>قیمت واحد</th>
                                    <th>قیمت کل</th>
                                    <th>واحد</th>
                                </tr>
                            </thead>

                            @Child
                        </table>
                    </face>

                    <face filter="Field in ('room')">
                        <tbody class="invoice_tbody Room_priceDetails">@Child</tbody>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">بزرگسال</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withbed') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">کودک (با تخت)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withoutbed') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">کودک (بدون تخت)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="رنج سنی مسافر">نوزاد</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('extra Adult') and type in ('object')">
                        <tr>
                            <td data-label="بزرگسال اضافه">بزرگسال اضافه</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('rooms') ">
                        <tr>
                            <td data-label="اتاق">-</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="قیمت واحد" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="قیمت کل" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="تعداد مسافر">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="واحد">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:10>

            <!-- type == 6 -->
            <basis:11 core="group" if="[##db.InvoiceType.Value##] in ('6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول قیمت به تفکیک محصولات</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>پرواز</th>
                                    <th>هتل</th>
                                    <th>بیمه</th>
                                    <th>جمع کل</th>
                                    <th>واحد</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">
                                <tr>@Child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('flight')">
                        <td data-label="پرواز" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('hotel')">
                        <td data-label="هتل" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('insurance')">
                        <td data-label="بیمه" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="جمع کل" class="Panel_Seprator">@value</td>
                    </face>

                    <face filter="Field in ('unit')">
                        <td data-label="واحد">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:11>

            <!-- baggage ############################################################################################## -->
            <!-- type == 1,2 -->
            <basis:12 core="group" if="[##db.InvoiceType.Value##] in ('1','2','6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','travelDate','account','passengers','passengersvisa','products','priceDetails','bill','creditPay')">
                    </face>
                    <face filter="Field in ('baggages') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول قیمت بار</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>نام و نام خانوادگی</th>
                                    <th>عنوان</th>
                                    <th>توضیحات</th>
                                    <th>قیمت واحد</th>
                                    <th>واحد</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('baggage')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('name')">
                        <td data-label="نام و نام خانوادگی">@value</td>
                    </face>
                    <face filter="Field in ('title')">
                        <td data-label="عنوان">@value</td>
                    </face>
                    <face filter="Field in ('type')">
                        <td data-label="توضیحات">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="واحد">@value</td>
                    </face>

                    <face filter="Field in ('cost')">
                        <td data-label="قیمت واحد" class="Panel_Seprator">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:12>

            <basis:17 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','Financial','adult','child','infant','services','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('wheelchair') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول قیمت صندلی چرخدار</p>
                            </caption>
                            <thead>
                                <tr>

                                    <td>تعداد صندلی چرخدار</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                    <td>توضیحات</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">
                                <tr>@Child</tr>
                            </tbody>
                        </table>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','des_service')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','Financial','adult','child','infant','wheelchair','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('services') and type in ('Array') and value not in ('[]')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول قیمت خدمات</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>نام خدمات</td>
                                    <td>تعداد</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                    <td>توضیحات</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('service') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','name','des_service')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','Financial','adult','child','infant','wheelchair','services','escortinfo')">
                    </face>
                    <face filter="Field in ('transfers') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول قیمت ترنسفر</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>نام ترنسفر</td>
                                    <td>آدرس</td>
                                    <td>ساعت</td>
                                    <td>تلفن</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                    <td>توضیحات</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('transfer') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','car_name','address','time','phone','des_transfer')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','Financial','adult','child','infant','wheelchair','services','transfers')">
                    </face>
                    <face filter="Field in ('escortinfo') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول قیمت مشایعت کننده</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>نام</td>
                                    <td>نام خانوادگی</td>
                                    <td>جنسیت</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('escort') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('unit','firsname','lastname')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('gender') and value = '0'">
                        <td>Female</td>
                    </face>
                    <face filter="Field in ('gender') and value = '1'">
                        <td>Male</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>


            </basis:17>


            <!-- bill ################################################################################################# -->
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <face
                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')">
                </face>
                <face filter="Field in ('bill')">
                    <table class="invoice_tbl">
                        <caption class="invoice_caption">
                            <p><span>جدول قیمت کلی</span></p>
                        </caption>
                        <thead>
                            <tr>
                                <th>جمع کل</th>
                                <th>کسر کمیسیون</th>
                                <th>مبلغ تخفیف</th>
                                <th>کد تخفیف</th>
                                <th>مبلغ قابل پرداخت با کسر کمیسیون</th>
                                <th>واحد</th>
                            </tr>
                        </thead>

                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </face>

                <face filter="Field in ('totalprice')">
                    <td data-label="جمع کل" class="Panel_Seprator" style="direction:rtl">@value
                    </td>
                </face>
                <face filter="Field in ('commission')">
                    <td data-label="کسر کمیسیون" class="Panel_Seprator" style="direction:rtl">
                        @value</td>
                </face>
                <face filter="Field in ('couponcost')">
                    <td data-label="مبلغ تخفیف" class="Panel_Seprator" style="direction:rtl">
                        @value</td>
                </face>
                <face filter="Field in ('totalwithcommisions')">
                    <td data-label="مبلغ قابل پرداخت با کسر کمیسیون" class="Panel_Seprator" style="direction:rtl">@value
                    </td>
                </face>
                <face filter="Field in ('unit')">
                    <td data-label="واحد">@value</td>
                </face>
                <face filter="Field in ('couponcode')">
                    <td data-label="کد تخفیف">@value</td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>

            <!-- User Description ##################################################################################### -->
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <layout>
                    <table class="invoice_tbl">
                        <caption class="invoice_caption">
                            <p>توضیحات کاربر</p>
                        </caption>
                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </layout>
                <face
                    filter="Field in ('invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','bill','Financial')">
                </face>

                <face filter="Field in ('description')">
                    <td data-label="توضیحات کاربر" style="text-align:right;padding:10px;width:98%;float: right;">@value
                    </td>
                </face>
                <face filter="Field in ('userDescription ')">
                    <td data-label="توضیحات کاربر" style="text-align:right;padding:10px;width:98%;float: right;">@value
                    </td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>



            </div>

            <div id="2" class="Tab_Content">
                <table class="invoice_tbl">
                    <caption class="invoice_caption">
                        <p><span>مالی</span></p>
                    </caption>
                    <thead>
                        <tr>
                            <th>مبلغ بدهکاری ([##db.unit_title.Value##])</th>
                            <th>مبلغ بستانکاری ([##db.unit_title.Value##])</th>
                            <th>نام حساب</th>
                            <th>توضیحات</th>
                            <th>باقیمانده</th>
                        </tr>
                    </thead>

                    <tbody class="invoice_tbody">
                        <basis core="print" datamembername="db.StatusAccount">
                            <face filter="RowNumber <> max(RowNumber)">
                                <tr>
                                    <td data-label="مبلغ بدهکاری ([##db.unit_title.Value##])" class="Panel_Seprator">
                                        @debtor</td>
                                    <td data-label="مبلغ بستانکاری ([##db.unit_title.Value##])" class="Panel_Seprator">
                                        @creditor</td>
                                    <td data-label="نام حساب">@title</td>
                                    <td data-label="توضیحات">@description</td>
                                    <td data-label="باقیمانده">-</td>
                                </tr>
                            </face>

                            <face filter="RowNumber = max(RowNumber)">
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td data-label="باقیمانده" class="Panel_Seprator">@taraz</td>
                                </tr>
                            </face>
                        </basis>
                        <tr></tr>
                    </tbody>
                </table>
            </div>

            <div id="3" class="Tab_Content">
                <div class="invoice_Documents">
                    <div class="invoice_Documents_top">
                        <div class="invoice_Documents_Title">
                            جهت مشاهده و دانلود مدارک یکی از گزینه های باسربرگ یا بدون سربرگ را برحسب زبان مورد
                            نیاز, انتخاب نمایید
                        </div>
                        <ul class="invoice_Documents_state">
                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_lang" value="1"
                                        onclick="Document_lang(this)" checked>
                                    <span class="Panel_check_mark"></span>
                                    فارسی
                                </label>
                            </li>

                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_lang" value="2"
                                        onclick="Document_lang(this)">
                                    <span class="Panel_check_mark"></span>
                                    English
                                </label>
                            </li>
                        </ul>
                        <ul class="invoice_Documents_state">
                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_show" value="1" id="withHead"
                                        onclick="Document_show(this)" checked>
                                    <span class="Panel_check_mark"></span>
                                    دانلود مدارک با سربرگ
                                </label>
                            </li>

                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_show" value="0" id="witouthHead"
                                        onclick="Document_show(this)">
                                    <span class="Panel_check_mark"></span>
                                    دانلود مدارک بدون سربرگ
                                </label>
                            </li>
                        </ul>
                    </div>

                    <div class="invoice_Documents_bottom">
                        <basis core="tree" datamembername="db.Document_Tree" idcol="id" parentidcol="parentid"
                            nullvalue="null">

                            <face filter="Field in ('Error') and value in ('invoice is Cancel')">
                                <div>امکان دانلود مدارک ، برای قراردادهای کنسل شده وجود ندارد </div>
                            </face>

                            <face filter="Field in ('Error') and value in ('invoice is not Clear')">
                                <div>امکان دانلود مدارک ، برای قراردادهای تسویه نشده وجود ندارد
                                </div>
                            </face>

                            <face filter="Field in ('doucument')">
                                <div class="invoice_Documnet">@child</div>
                            </face>

                            <face filter="Field in ('title') and value in ('invoice')">
                                <div class="invoice_Documnet_title">
                                    دانلود قرارداد<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('ticket')">
                                <div class="invoice_Documnet_title">
                                    دانلود بلیط<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('voucher')">
                                <div class="invoice_Documnet_title">
                                    دانلود واچر<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('insurance')">
                                <div class="invoice_Documnet_title">
                                    دانلود بیمه<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>
                            <face filter="Field in ('title') and value in ('visa')">
                                <div class="invoice_Documnet_title">
                                    دانلود مدارک اپلود شده<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>
                            <face filter="Field in ('title') and value in ('uploadvisa')">
                                <div class="invoice_Documnet_title">
                                    دانلود ویزا<span class="lang-invoice">(Fa)</span>
                                </div>
                            </face>

                            <face filter="Field in ('links','links_upload')">
                                <div class="invoice_Documnet_Content">
                                    @Child
                                    <div class="clr"></div>
                                </div>
                            </face>

                            <face filter="Field in ('link','link_upload') and type in ('object')">
                                @Child</face>
                            <face filter="Field in ('whead')">
                                <div class="invoice_pdf whead">@Child</div>
                            </face>
                            <face filter="Field in ('wohead')">
                                <div class="invoice_pdf wohead" style="display:none">@Child</div>
                            </face>
                            <face filter="Field in ('whead_upload')">
                                <div class="invoice_pdf">@Child</div>
                            </face>
                            <face filter="Field in ('link','link_upload') and type in ('scalar.string')">
                                <a href="@value" class="Invoice-Doucument" target="_blank" data-href="@value">
                                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i>

                                   
                                        <img src="[##cms.cms.cdn##]/_images/Panel-PDF.png" width="128" height="128"
                                            alt="Pdf Icon">
                            </face>

                            <face filter="Field in ('name','name_upload')">
                                <span>@value</span>
                                </a>
                            </face>

                            <face filter="type in ('object','array')">@Child</face>
                        </basis>
                    </div>
                </div>
            </div>

            <div id="4" class="Tab_Content">

                <basis core="group"
                    if="[##db.Remaining_amount.taraz##] > 0 and [##db.payment_permission.result##]='1' ">

                    <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                        <member name="webservice_list" method="cms" query='
                                            { 
                                                "name": "db",
                                                "mid": "20",
                                                "member":
                                                [
                                                    { 
                                                        "name": "q", 
                                                        "type":"list",
                                                        "request": "webservice_list",
                                                        "type": "5",
                                                    }
                                                ] 
                                            } ' />
                    </basis>

                    <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                        <member name="price_payment" method="cms" query='
                                            { 
                                                "name": "db",
                                                "mid": "20",
                                                "member":
                                                [
                                                    { 
                                                        "name": "q", 
                                                        "type":"list",
                                                        "request": "price_payment",
                                                        "id": "[##cms.query.id##]"
                                                    }
                                                ] 
                                            } ' />
                    </basis>

                    <basis core="group" name="info">
                        <basis core="inlinesource" name="db">
                            <member name="bank" format="json"
                                postsql="select  Id , ParentId , case when trim(Field) is null  then  (select field from [db.bank] where id = m.parentid )else field end as field, value , type , path  from [db.bank] as m">
                                {"root":[##db.webservice_list.result##]}</member>
                        </basis>
                        <basis core="tree" datamembername="db.bank" idcol="id" parentidcol="parentid" nullvalue="null">
                            <face filter="ParentId in ('1')">
                                <table class="invoice_tbl PaymentTable">
                                    <caption class="invoice_caption">
                                        <p><span>لیست درگاه های پرداخت</span></p>
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th>درگاه پرداخت</th>
                                            <th>لینک پرداخت</th>
                                            <th>مبلغ قابل پرداخت</th>
                                        </tr>
                                    </thead>
                                    <tbody class="invoice_tbody">@child</tbody>
                                </table>
                            </face>
                            <face filter="Field in ('bank') and type in ('Object')">
                                <tr>@child</tr>
                            </face>
                            <face filter="Field in ('id')">
                                <td data-label="درگاه پرداخت">
                                    <input type="hidden" name="id" value="@value" class="bankId">
                            </face>
                            <face filter="Field in ('logo')"><span><img src="@value" width="45"></span></td>
                            </face>
                            <face filter="Field in ('persianName')">
                                <td data-label="لینک پرداخت"><span class="button_payment"
                                        onclick="button_payment(this)">جهت پرداخت آنلاین از طریق
                                        درگاه @value, اینجا را کلیک کنید</span></td>
                                <td data-label="مبلغ قابل پرداخت"><span class="Panel_Seprator"
                                        style="margin-left: 10px;">[##db.price_payment.result##]</span><span>
                                        [##db.unit_title.Value##] </span></td>
                            </face>
                            <face filter="type in ('array','object')">@child</face>
                        </basis>
                    </basis>
                    <div class="form_payment"></div>
                    <script type="text/javascript">
                        function button_payment(a) {
                            var bankId = $(a).closest('tr').find(".bankId").val();
                            var agencyid = $(".agencyid").val();
                            var phonenumber = $(".user-mobile-info").val();
                            if (bankId == 97) {
                                $(".form_payment").append(`
                            <form action="/Panel_Connecting_Bank.bc" method="post">
                            <p>کاربر گرامی, جهت استفاده از درگاه سیبانک لطفا تلفن همراه و کد ملی خود را وارد نمایید.</p>
                            <p class="get-bank-warning"> لازم به ذکر است که تلفن همراه وارد شده باید متعلق به کد ملی ذکر شده باشد</p>
                            <input type="text" required=""  class="pay_input" name="mobileSiBank" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '')" placeholder="تلفن همراه"/>
                            <input type="text" required="" class="pay_input" name="nationalCodeSiBank" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '')" placeholder="کد ملی"/>
                            <input type="hidden" name="factorid" value="[##cms.query.id##]">
                            <input type="hidden" name="bank_id" value="${bankId}"/>
                            <input type="hidden" name="phonenumber" value="${phonenumber}"/>
                            <input type="hidden" name="agencyid" value="${agencyid}"/>
                            <button class="pay_btn" type="submit">پرداخت</button>
                            </form>`)
                            } else {
                                var form =
                                    '<form action="Panel_Connecting_Bank.bc" method="post"><input type="hidden" name="factorid" value="[##cms.query.id##]"><input type="hidden" name="bank_id" value="' +
                                    bankId + '"><input type="hidden" name="phonenumber" value="' +
                                    phonenumber + '"><input type="hidden" name="agencyid" value="' +
                                    agencyid + '"></form>'
                                $(".form_payment").html(form)
                                $(".form_payment").find("form").submit()
                            }


                        }
                        $(".button_payment").each(function () {
                            var bank_id = $(this).closest("tr").find(".bankId").val()
                            if (bank_id == 98) {
                                $(this).closest("tr").css("opacity", "0.3");
                                $(this).css("cursor", "unset")
                                $(this).removeAttr('onclick');
                            }
                        })
                    </script>
                </basis>
                <basis core="print" datamembername="db.CustomerPayment">
                    <else-layout></else-layout>
                    <layout>
                        <table class="invoice_tbl PaymentTable">
                            <caption class="invoice_caption">
                                <p><span>پرداخت ها</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th> ردیف</th>
                                    <th> تاریخ</th>
                                    <th> ساعت</th>
                                    <th> نام بانک</th>
                                    <th> شماره پیگیری</th>
                                    <th> شماره کارت</th>
                                    <th> مبلغ ([##db.unit_title.Value##])</th>
                                    <th> وضعیت</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </layout>

                    <face filter="db.payment.result=0">
                        <tr>
                            <td data-label="ردیف">
                                @RowNumber
                                <p style="display:none" class="CardNo">@db.payment.description</p>
                            </td>
                            <td data-label="تاریخ">@db.payment.date</td>
                            <td data-label="ساعت">@db.payment.time</td>
                            <td data-label="نام بانک">@db.banks.name</td>
                            <td data-label="شماره پیگیری">@db.payment.refnumber</td>
                            <td data-label="شماره کارت" class="CNO"></td>
                            <td data-label="مبلغ ([##db.unit_title.Value##])" class="Panel_Seprator">@db.payment.price
                            </td>
                            <td data-label="وضعیت">ناموفق</td>
                        </tr>
                    </face>

                    <face filter="db.payment.result=1">
                        <tr>
                            <td data-label="ردیف">
                                @RowNumber
                                <p style="display:none" class="CardNo">@db.payment.description</p>
                            </td>
                            <td data-label="تاریخ">@db.payment.date</td>
                            <td data-label="ساعت">@db.payment.time</td>
                            <td data-label="نام بانک">@db.banks.name</td>
                            <td data-label="شماره پیگیری">@db.payment.refnumber</td>
                            <td data-label="شماره کارت" class="CNO" style="direction:rtl"></td>
                            <td data-label="مبلغ ([##db.unit_title.Value##])" class="Panel_Seprator">@db.payment.price
                            </td>
                            <td data-label="وضعیت">موفق</td>
                        </tr>
                    </face>
                </basis>

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','invoiceDetails','passengers','passengersvisa','products','priceDetails','baggages')">
                    </face>
                    <face filter="Field in ('creditPay') and value <> '{ }'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>پرداخت ها</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th> ردیف</th>
                                    <th> تاریخ</th>
                                    <th> ساعت</th>
                                    <th> نام بانک</th>
                                    <th> مبلغ ([##db.unit_title.Value##])</th>
                                    <th> وضعیت</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('pay')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('date')">
                        <td data-label="ردیف">1</td>
                        <td data-label="تاریخ">@value</td>
                    </face>

                    <face filter="Field in ('time')">
                        <td data-label="ساعت">@value</td>
                        <td data-label="روش پرداخت">پرداخت از طریق اعتبار</td>
                    </face>

                    <face filter="Field in ('totalwithcommision')">
                        <td data-label="مبلغ ([##db.unit_title.Value##])"><span class="Seprator">@value</span></td>
                        <td data-label="وضعیت">موفق</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </div>
            <div id="5" class="Tab_Content">
                <!--Note ############################################################################################## -->
                <basis core="tree" datamembername="db.invoice_NoteList" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <layout>
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>آرشیو یادداشت های اخیر</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>ردیف</th>
                                    <th>نام ارسال کننده</th>
                                    <th>تاریخ</th>
                                    <th>ساعت</th>
                                    <th>متن یادداشت</th>
                                    <th>نمایش</th>
                                </tr>
                            </thead>
                            <tbody class="invoice_tbody">@Child</tbody>
                        </table>
                    </layout>
                    <face filter="Field in ('result')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('index')">
                        <td data-label="ردیف">@value</td>
                    </face>
                    <face filter="Field in ('username')">
                        <td data-label="نام ارسال کننده">@value</td>
                    </face>
                    <face filter="Field in ('date') and type in ('object')">
                        <td data-label="تاریخ">@child</td>
                    </face>
                    <face filter="Field in ('sstring')"><span>@value</span></face>
                    <face filter="Field in ('mstring')"><span>@value</span></face>
                    <face filter="Field in ('hour') and type in ('Scalar.String')">
                        <td data-label="ساعت">@value</td>
                    </face>
                    <face filter="Field in ('note') and type in ('Scalar.String')">
                        <td data-label="متن یادداشت">@value</td>
                    </face>
                    <face filter="Field in ('note_type') and type in ('Scalar.String')">
                        <td data-label="نمایش">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </div>
            <div id="6" class="Tab_Content">
                <div class="InvoiceBox" style="width:99%;margin: 5px auto;">
                    <div>جهت ثبت درخواست خود برای این قرارداد فرم زیر را پر کنید.</div>
                    <form action="/Panel_invoice_refundSave.bc?id=[##cms.query.id##]&type=[##db.InvoiceType.Value##]"
                        method="post" class="invoice_Note_Form">
                        <input type="hidden" name="_root.id" value="[##cms.query.id##]">
                        <ul style="border-bottom: 0;">
                            <li class="hotelVisa-search-list">
                                <div class="right_side"><label for="eachroute" class="checkradiolink">عنوان
                                        درخواست:</label></div>
                                <div class="left_side" style="width:90%">


                                    <basis core="tree" datamembername="db.Itemjson" idcol="id" parentidcol="parentid"
                                        nullvalue="null">
                                        <layout>
                                            <select name="_root.notetype" class="notetype" onchange="request(this)">
                                                <option value="">-</option>
                                                @child
                                            </select>
                                        </layout>
                                        <face filter="Field in ('code') ">
                                            <option value="@value">
                                        </face>
                                        <face filter="Field in ('title') ">
                                            @value</option>
                                        </face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>
                                </div><!-- end left_side -->
                                <div class="clr"></div>
                            </li>
                        </ul>
                        <div class="passengerlist invoice_resize" style="display: none;">
                            <table class="invoice_tbl">
                                <thead>
                                    <tr>
                                        <td>--</td>
                                        <td>کدملی</td>
                                        <td>نام </td>
                                        <td>نام خانوادگی</td>
                                        <td>تاریخ تولد</td>
                                        <td>جنسیت</td>
                                        <td>رنج سنی مسافر</td>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <basis core="tree" datamembername="db.passengersjson" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="ParentId in ('1') ">
                                            <tr>@child</tr>
                                        </face>
                                        <face filter="Field in ('nationalcode') ">
                                            <td class="pointer fixed-width-xs ">
                                                <input id="check@ParentId" type="checkbox" class="idd Select_Check">
                                                <label for="check@ParentId"></label>
                                            </td>
                                            <td class="pointer fixed-width-xs ">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.nationalcode">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('firstname') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.firstname">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('lastname') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.lastname">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('birthdate') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.birthdate">
                                                <p>@value</p>
                                            </td>
                                        </face>
                                        <face filter="Field in ('gender') and value in ('0') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.gender">
                                                Female
                                            </td>
                                        </face>
                                        <face filter="Field in ('gender') and value in ('1') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.gender">
                                                male
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '0'">
                                            <td style="direction: ltr;" class="typepassenger">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.type">
                                                Infant
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '1'">
                                            <td style="direction: ltr;" class="typepassenger">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.type">
                                                Child
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '2'">
                                            <td style="direction: ltr;" class="typepassenger">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.type">
                                                Adult
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '3'">
                                            <td style="direction: ltr;" class="typepassenger">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.type">
                                                Child
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '4'">
                                            <td style="direction: ltr;" class="typepassenger">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.type">
                                                Adult (Extra)
                                            </td>
                                        </face>
                                        <face filter="type in ('array','object')"> @child
                                        </face>
                                    </basis>
                                </tbody>
                            </table>
                        </div>
                        <div class="text_request">
                            <div class="invoicerequest">
                                <_textarea class="invoiceDesc" name="_root.description__0.desc" required=""
                                    placeholder="لطفا درخواست مورد نظر خود را تایپ نمایید...">
                                </_textarea>
                            </div>
                        </div>
                        <input class="invoice_Note_Save" type="submit" value="ثبت  درخواست">

                    </form>
                </div>
                <div class="InvoiceBox">
                    <div class="Note_ResultLoad">
                        <basis core="tree" datamembername="db.invoice_requestList" idcol="id" parentidcol="parentid"
                            nullvalue="null">
                            <layout>
                                <div class="invoice_resize invoice_resize">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption">
                                            <p>آرشیو درخواست های های اخیر</p>
                                        </caption>
                                        <thead>
                                            <tr>
                                                <td>ردیف</td>
                                                <td>نام ارسال کننده</td>
                                                <td>تاریخ</td>
                                                <td>ساعت</td>
                                                <td>عنوان درخواست</td>
                                                <td>وضعیت</td>
                                                <td>عملیات</td>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </div>
                            </layout>

                            <face filter="Field in ('result')">
                                <tr>@Child</tr>
                            </face>
                            <face filter="Field in ('index')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('username')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('date') and type in ('Object')">
                                <td>@child</td>
                            </face>
                            <face filter="Field in ('sstring')">
                                <div>@value</div>
                            </face>
                            <face filter="Field in ('mstring')">
                                <div style="direction:rtl;color:#727272">@value</div>
                            </face>
                            <face filter="Field in ('hour') and type in ('Scalar.String')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('note') and type in ('Scalar.String')">
                                <td class="note_txt">@value</td>
                            </face>
                            <face filter="Field in ('answer') and value in ('1')">
                                <td style="color:green">بررسی شده</td>
                            </face>
                            <face filter="Field in ('answer') and value in ('0')">
                                <td style="color:red">بررسی نشده</td>
                            </face>
                            <face filter="Field in ('answer') and value in ('2')">
                                <td style="color:#0010ff">بسته شده</td>
                            </face>
                            <face filter="Field in ('id') and type in ('Scalar.String')">
                                <td class="note_txt">
                                    <div class="btn-group-action">
                                        <div class="btn-group pull-right">
                                            <a class="edit btn btn-default"
                                                data-href="/Panel_invoice_request_view.bc?cat=202&id=@value&factorid=[##cms.query.id##]&open=[##cms.query.open##]&type=[##db.InvoiceType.Value##]"
                                                onclick="response_view(this)">
                                                <i class="fa fa-eye" aria-hidden="true"></i>
                                                <span class="tooltip">مشاهده</span>
                                            </a>


                                        </div>



                                    </div>
                                </td>
                            </face>

                            <face filter="type in ('Array','object')">@Child</face>
                        </basis>
                    </div>
                </div>
                <div class="deleterequest">
                    <div class="jconfirm-box">
                        <form class="popupdelete" action="" method="post">
                        </form>
                        <div class="title"><i class=""></i> اخطار</div>
                        <div class="content">آیا مطمئن هستید ؟ </div>
                        <div class="buttons">
                            <button class="btn btn-default btn-default1 confirmButton"
                                onclick="confirmButton(this)">بله</button>
                            <button class="btn btn-default btn-default1 cancelButton"
                                onclick="cancelButton(this)">خیر</button>
                        </div>
                        <div class="clr"></div>
                    </div>
                </div>
                <div class="request_responses">
                    <div class="request_response">
                    </div>
                </div>

            </div>
            <div id="7" class="Tab_Content">

            </div>
            </div>
            </div>
            <basis core="call" file="Panel-Dashboard-Footer.inc" />
            </div>

            <div class="clr"></div>
            </div>
            <script src="[##cms.cms.cdn##]/_js/User_Panel.js"></script>
            <script type="text/javascript">
                function show_information(evt, InfoName) {
                    var i, TabContent, TabSectionTitle;

                    TabContent = document.getElementsByClassName("Tab_Content");
                    TabSectionTitle = document.getElementsByClassName("Tab_Title");

                    for (i = 0; i < TabContent.length; i++) {
                        TabContent[i].style.display = "none";
                    }
                    for (i = 0; i < TabSectionTitle.length; i++) {
                        TabSectionTitle[i].className = TabSectionTitle[i].className.replace("actives", "");
                    }
                    document.getElementById(InfoName).style.display = "block";
                    evt.currentTarget.className += " actives";
                }

                document.getElementById("defaultOpen").click();


                var x = 0;
                var y = 0;
                var cardNo = 0;

                $(".PaymentTable tbody tr").each(function () {
                    var x = $(this).find(".CardNo").text();
                    y = x.split(",")
                    cardNo = y[0];
                    cardNo = cardNo.split(":");
                    var cardNomber = cardNo[1];
                    cardNomber = cardNomber.slice(1, -1);
                    $(this).find(".CNO").text(cardNomber)
                })

                $(".Room_priceDetails").each(function () {
                    roomCount = parseInt($(this).index()) - 1
                    indexRow = $(this).find("tr").size()

                    if (roomCount == 1)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق اول</td>')

                    if (roomCount == 2)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق دوم</td>')

                    if (roomCount == 3)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق سوم</td>')

                    if (roomCount == 4)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق چهارم</td>')

                    if (roomCount == 5)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق پنجم</td>')

                    if (roomCount == 6)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before(
                            '<td data-label="اتاق" rowspan="' + indexRow + '">اتاق ششم</td>')
                })

                $(".active").each(function () {
                    $(this).closest(".invoice_Documnet").find(".invoice_Documnet_Content").show()
                })

                function Document_show(x) {
                    if (parseInt($(x).val()) == 1) {
                        $(".wohead").hide()
                        $(".whead").show()
                    }
                    if (parseInt($(x).val()) == 0) {
                        $(".whead").hide()
                        $(".wohead").show()
                    }
                }
                function Document_lang(x) {
                    if (parseInt($(x).val()) == 1) {
                        $(".lang-invoice").each(function(){
                            $(this).text("Fa")
                        });
                        $(".Invoice-Doucument").each(function(){
                            $(this).attr("href",$(this).attr("data-href"));
                         });

                    }
                    if (parseInt($(x).val()) == 2) {
                        $(".lang-invoice").each(function(){
                            $(this).text("En")
                        });
                        $(".Invoice-Doucument").each(function(){
                            var href =  $(this).attr("href").split("/")
                            $(this).attr("href",`/EN-${href[1]}`)
                         });
                    }
                }
                
                $(".wheelchair").each(function () {
                    if ($(this).val() == "1") {
                        $(this).siblings(".typepassenger").append(
                            '<div><i class="fas fa-wheelchair"></i></div>')
                    }
                })
                $(".flightType").each(function () {

                    if ($(this).val() == "1") {
                        $(this).closest("table").find(".th_flightType").text('شهر مبدا')
                    } else {
                        $(this).closest("table").find(".th_flightType").text('شهر مقصد')
                    }
                })
            </script>

            <style type="text/css">
                @font-face {
                    font-family: 'IRANSansWeb';
                    src: url('http://cdn.basiscore.net/_fonts/IRANSansWeb.eot');
                    src: local('?'), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.woff2') format("woff"), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.ttf') format("truetype"), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'FontAwesome';
                    src: local('FontAwesome'), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.eot?#iefix');
                    src: local('?'), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.woff') format("woff"), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.ttf') format("truetype"), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'IRANSansWeb';
                    src: url('https://cdn.basiscore.net/_fonts/IRANSansWeb.eot');
                    src: local('?'), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.woff2') format("woff"), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.ttf') format("truetype"), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'FontAwesome';
                    src: local('FontAwesome'), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.eot?#iefix');
                    src: local('?'), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.woff') format("woff"), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.ttf') format("truetype"), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                .invoice_Details .typeDate_8,
                .invoice_Details .typeDate_9 {
                    font-size: 18px !important;
                }

                .invoice_Details .iconDate_8,
                .invoice_Details .iconDate_9 {
                    margin-top: 17px !important;
                }

                .button_payment:hover {
                    color: #3e8e41;
                    cursor: pointer;
                }

                .fa-wheelchair::before {
                    content: "\f193";
                    font-family: FontAwesome;
                    font-size: 15px;
                    font-weight: bold;
                }

                .right_side {
                    float: right;
                    width: 10%;
                }

                .left_side {
                    float: right;
                }

                .left_side select {
                    width: 230px;
                    border: 1px solid #CCC;
                    background: #F5F5F5 -moz-linear-gradient(center top, #FFF, #F5F5F5) repeat scroll 0 0 / 100% auto;
                    border-radius: 4px;
                    padding: 1px 0;
                    font-family: 'IRANSansWeb';
                }

                .invoice_Note {
                    padding: 5px 0px;
                    border: 1px solid #DEE9EC;
                    font-size: 11px;
                    background: #F5F8F9;

                    font-family: IRANSansWeb;
                    color: #555;
                    width: 30%;
                    height: 50px;
                    border-left: 0;

                }

                .invoiceDesc {
                    padding: 5px 6px;
                    border: 1px solid #C7D6DB;
                    font-size: 11px;
                    background: #F5F8F9;
                    border-radius: 4px;
                    font-family: IRANSansWeb;
                    color: #555;
                    width: 30%;
                    height: 80px;
                    margin: 10px 0;
                }

                .invoice_Note_Save:hover {
                    background-color: #E98403;
                    cursor: pointer;
                }

                .invoice_Note_Save {
                    padding: 3px 8px;
                    color: #fff;
                    background: #4D576E;
                    background-color: rgb(77, 87, 110);
                    border-radius: 4px;
                    font-family: 'IRANSansWeb';
                }

                .fa-eye::before {
                    content: "\f06e";
                    font-family: FontAwesome;
                    font-style: normal;
                    font-size: 14px;
                }

                .btn-default:hover .tooltip {
                    opacity: 1;
                    visibility: visible;
                }

                .tooltip {
                    visibility: hidden;
                    position: absolute;
                    padding: 4px 8px;
                    background: #555;
                    bottom: -27px;
                    color: #fff;
                    text-align: center;
                    z-index: 999;
                    left: 73px;
                    opacity: 0;
                    transition: all .5s;
                    -webkit-transition: all .5s;
                    -moz-transition: all .5s;
                    -o-transition: all .5s;
                    -webkit-border-radius: 5px;
                    -webkit-border-top-left-radius: 0;
                    -moz-border-radius: 5px;
                    -moz-border-radius-topleft: 0;
                    border-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 0;
                }

                .fa-trash::before {
                    content: "\f1f8";
                    font-family: FontAwesome;
                    font-style: normal;
                }

                .btn-group.pull-right a {
                    width: 24px;
                    text-align: center;
                    padding: 6px 0 !important;
                    border-radius: 3px !important;
                    border: 1px solid #9d9a9a;
                }

                .jconfirm-box div.title {
                    font-size: 15px;
                    font-family: inherit;
                    padding: 10px 15px 5px;
                    direction: rtl;
                    text-align: right;
                    border-top-left-radius: 5px;
                    border-top-right-radius: 5px;
                    background: #f7f7f7;
                }

                .jconfirm-box .buttons button.btn-default:hover {
                    background: #ddd !important;
                    color: #333 !important;
                }

                .jconfirm-box .buttons button.btn-default {
                    color: #333 !important;
                    border-radius: 6px !important;
                    border: 1px solid #e3e3e3 !important;
                    box-shadow: 0px 3px 2px 1px #c9c8c8 !important;
                    text-align: center !important;
                    cursor: pointer !important;
                    width: 35px !important;
                    margin-right: 4px !important;
                    height: 36px !important;
                    line-height: 36px;
                }

                .jconfirm-box .buttons button {
                    border: none;
                    background-image: none;
                    text-transform: uppercase;
                    font-size: 14px;
                    font-weight: bold;
                    text-shadow: none;
                    -webkit-transition: background .1s;
                    transition: background .1s;
                    color: white;
                }

                .jconfirm-box .buttons button+button {
                    margin-left: 5px;
                }

                .jconfirm-box {
                    transition-duration: 0.4s;
                    transition-timing-function: cubic-bezier(0.27, 1.12, 0.32, 1.5);
                    margin-top: 161px;
                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
                    padding: 0px 0px 10px 0px;
                    border-radius: 5px;
                    width: 30%;
                    margin: 0 auto;
                    margin-top: 0px;
                    opacity: 1;
                    -webkit-transition-property: -webkit-transform, opacity, box-shadow;
                    transition-property: transform, opacity, box-shadow;
                    background: white;
                    border-radius: 4px;
                    position: relative;
                }

                .request_response {

                    margin-top: 161px;
                    padding: 10px 15px 10px 10px;
                    border-radius: 5px;
                    width: 50%;
                    margin: 0 auto;
                    margin-top: 0px;
                    opacity: 1;
                    background: white;
                    border-radius: 4px;
                    position: relative;
                    top: 100px;
                }

                .jconfirm-box .buttons {
                    float: left;
                    padding: 10px 15px;
                }

                .deleterequest,
                .request_responses {
                    display: none;
                    position: fixed;
                    background: rgba(0, 0, 0, 0.5);
                    top: 0;
                    bottom: 0;
                    left: 0;
                    right: 0;
                }

                .add_note {

                    width: 28px;
                    height: 28px;
                    background: #fff;
                    border: 1px solid #b6c7cd;
                    border-radius: 4px;
                    position: absolute;
                    top: 10px;
                    right: 759px;
                    text-align: center;
                    line-height: 30px;
                    font-size: 13px;
                    color: #238c51ed;
                    margin-top: 1px;
                    cursor: pointer;
                    float: left;
                }

                .del_time {
                    cursor: pointer;
                    width: 28px;
                    height: 28px;
                    background: #fff;
                    border: 1px solid #b6c7cd;
                    border-radius: 4px;
                    position: absolute;
                    top: 11px;
                    right: 759px;
                }

                .serviceName:after {
                    content: "-";
                    margin: 0 5px
                }

                .serviceName:last-child:after {
                    display: none
                }

                .serviceName p {
                    text-align: right !important;
                }

                .pay_input {
                    display: inline-block;
                    width: 120px;
                    color: #5b5959;
                    box-sizing: border-box;
                    font-family: 'IRANSansWeb';
                    font-size: 12px;
                    border: 1px solid #C7D6DB;
                    background: #f7f9fb;
                    border-radius: 4px;
                    padding: 2px;
                    margin: 2px;
                }

                .get-bank-warning {
                    font-size: 13px;
                    color: red;
                    margin: 1em 0;
                }

                .pay_btn {
                    font-family: 'IRANSansWeb';
                    font-size: 12px;
                    cursor: pointer;
                    border-radius: 5px;
                    text-align: center;
                    width: 75px;
                    padding: 3px;
                    margin: 3px;
                    display: inline-block;
                    box-sizing: border-box;
                    border: 1px solid #C7D6DB;
                }
                .lang-invoice{margin: 0 0.5em;}
            </style>

            <script type="text/javascript">
                $(function () {
                    $(".invoice_Note_Form").on("submit", function (event) {
                        if ($(".invoiceDesc").val() == "")
                            return false

                        else {
                            $(".Select_Check").each(function () {
                                if (!$(this).prop("checked"))
                                    $(this).closest("tr").find(
                                        "input[type=text],.invoiceDesc ,input[type=hidden]")
                                        .attr("name", "")
                            })
                            // $(".invoiceDesc").val().replace(/\n|\r\n|\r/g, '<br>')
                            // $(".invoiceDesc").val().replace(/@|{|}|"|'|,|[|]/g, '')
                            // $(".invoiceDesc").val().replace(/<br ?\/?>/g, ' ')

                            $(".invoiceDesc").val($(".invoiceDesc").val().replace(/\n|\r\n|\r/g,
                                'BREAK'))
                            $(".invoiceDesc").val($(".invoiceDesc").val().replace(/@|{|}|"|'|,|[|]/g,
                                ''))

                            $(".Note_Loading").fadeIn()
                            event.preventDefault();

                            $.ajax({
                                url: $(".invoice_Note_Form").attr("action"),
                                type: $(".invoice_Note_Form").attr("method"),
                                data: $(".invoice_Note_Form").serialize(),
                                success: function (response) {
                                    $(".Note_Loading").fadeOut();
                                    $(".Note_ResultLoad").empty().html(response);
                                    $(".invoiceDesc").val("")
                                }
                            });
                        }
                    });
                });

                function request(a) {
                    if ($(a).val() == "6") {
                        $(a).closest("ul").siblings(".passengerlist").css("display", "block")
                    } else {
                        $(a).closest("ul").siblings(".passengerlist").css("display", "none")
                    }

                }

                function popupdelete(a) {
                    $(a).closest(".InvoiceBox").siblings(".deleterequest").css("display", "block")
                    var href = $(a).attr("data-href");
                    $(a).closest(".InvoiceBox").siblings(".deleterequest").find("form").attr('action', href);


                }


                function response_view(a) {

                    $.ajax({
                        url: $(a).attr("data-href"),
                        type: "post",
                        success: function (response) {
                            $(".request_response").empty().html(response);
                            $(".request_responses").show()
                        }
                    })
                }


                function cancelButton(a) {
                    $(".deleterequest").hide()
                }

                function confirmButton(a) {
                    $(".deleterequest").find(".popupdelete").submit()

                }
                // $(document).ready(function() {
                //     $(".deleterequest").click(function(){
                //       $(".deleterequest").hide();

                //     });
                //      $(".request_responses").click(function(){
                //       $(".request_responses").hide();

                //     });
                // });
                $(document).on('click', function (event) {
                    if (!$(event.target).closest('.jconfirm-box,.del_button').length) {
                        $(".deleterequest").hide();
                    }

                })
                $(document).on('click', function (event) {
                    if (!$(event.target).closest('.request_response,.edit').length) {
                        $(".request_responses").hide();
                    }

                })
            </script>
            </body>

            </html>
        </basis>
    </basis>
</basis>
</basis>